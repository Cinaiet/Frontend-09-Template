<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <script>
    // function match(str) {
    //   let state = start
    //   for(let c of str) {
    //     state = state(c)
    //   }
    //   return state === end
    // }

    // function start(c) {
    //   if(c === 'a') {
    //     return foundA
    //   } else {
    //     return start
    //   }
    // }

    // function end() {
    //   return end
    // }

    // function foundA(c) {
    //   if(c === 'b') {
    //     return foundB
    //   } else {
    //     return start(c)
    //   }
    // }

    // function foundB(c) {
    //   if(c === 'c') {
    //     return foundC
    //   } else {
    //     return start(c)
    //   }
    // }

    // function foundC(c) {
    //   if(c === 'd') {
    //     return end
    //   } else {
    //     return start(c)
    //   }
    // }

    // const str = 'abcd'
    // console.log(match(str))


    function match(str) {
      let state = start
      for(let c of str) {
        state = state(c)
      }

      return state === end
    }

    function start(c) {
      if(c === 'a') {
        return foundB
      } else {
        return start
      }
    }

    function end() {
      return end
    }

    function foundB(c) {
      if(c  === 'b') {
        return foundNextA
      } else {
        return start(c)
      }
    }

    function foundNextA(c) {
      if(c  === 'a') {
        return foundNextB
      } else {
        return start(c)
      }
    }

    function foundNextB(c) {
      if(c === 'b') {
        return foundNextA2
      } else {
        return start(c)
      }
    }

    function foundNextA2(c) {
      if(c === 'a') {
        return foundNextB2
      } else {
        return start(c)
      }
    }

    function foundNextB2(c) {
      if(c === 'b') {
        return foundEnd
      } else {
        return start(c)
      }
    }

    function foundEnd(c) {
      if(c === 'x') {
        return end
      } else {
        return start(c)
      }
    }

    let str = 'abababx'
    console.log(match(str))



  </script>
</body>
</html>